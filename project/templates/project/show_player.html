<!--File: project/templates/project/show_player.html
Author: Yi Ji (Wayne) Wang (waynew@bu.edu), 12/08/2025
Description: Template to show a single Player.
-->

{% extends 'project/base.html' %}

{% block content %}

    <!-- table containing some info about the Player -->

    <table class="mb-60">
        <tr>

            <!-- the Player's profile image -->

            <td>
                <img class="pfp medium circle mr-50" src="{{player.profile_image.url}}">
            </td>

            <!-- some text info, along with buttons to see collection, edit profile, and trade -->
    
            <td>
                <h1 class="large">{{player.username}}</h1>
                <h1 class="small">Joined on {{player.date_joined.date}}</h1>

                {% if player.boxes_opened == 1 %}
                    <h1 class="small mb-50">{{player.boxes_opened}} Blindbox Opened</h1>
                {% else %}
                    <h1 class="small mb-50">{{player.boxes_opened}} Blindboxes Opened</h1>
                {% endif %}

                <div class="button-wrapper">
                    <a class="button small salmon mr-15" href="{% url 'show_collection' player.pk %}">Collection</a>

                    {% if request.user.is_authenticated %}
                        {% if player == request.user.player %}
                            <a class="button small salmon" href="{% url 'update_player' %}">Edit Profile</a>
                        {% else %}
                            <a class="button small salmon" href="{% url 'start_trade' player.pk %}">Trade</a>
                        {% endif %}
                    {% endif %}
                </div>
            </td>
        </tr>
    </table>

    <!-- 9 display slots to display the Player's favourite OwnedItems -->

    <div class="case-grid">
        {% for slot in player.get_slots %}

            <!-- if the Player is viewing their own Profile, give the option to click a display slot
            and trigger the form process for displaying an OwnedItem 
            -->

            {% if player == request.user.player %}
                {% include 'project/components/C_display_case.html' with clickable=1 %}

            <!-- otherwise, just show whatever was in the display slot before -->

            {% else %}
                {% include 'project/components/C_display_case.html' %}
            {% endif %}
        {% endfor %}
    </div>

{% endblock %}