{% extends 'project/base.html' %}

{% block content %}

    <h1>{{box.name}}</h1>

    <img class="box" src="{{box.cover_image.url}}">

    <a href="{% url 'update_box' box.pk %}">
        <h2>Update Box</h2>
    </a>

    <a href="{% url 'delete_box' box.pk %}">
        <h2>Delete Box</h2>
    </a>

    <h2>Items in the box made by {{request.user.player.username}}:</h2>

    {% if box.published %}
        {% if success %}
            <h4 style="color:green">Published box to the shop!</h4>
        {% endif %}

        <a href="{% url 'unpublish_box' box.pk %}">
            <h2>Unpublish Box</h2>
        </a>

    {% else %}
        {% if failure %}
            <h4 style="color:red">Box must contain an item of each rarity type!</h4>
        {% endif %}

        <a href="{% url 'publish_box' box.pk %}">
            <h2>Publish Box</h2>
        </a>
    {% endif %}

    <a href="{% url 'create_item' box.pk %}">
        <h2>Create Item</h2>
    </a>

    {% for item in box.get_all_items %}
        <div>
            <h3>{{item.rarity}}</h3>

            <img class="box" src="{{item.image.url}}" style="border: 3px solid {{item.get_rarity_color}}">

            <a href="{% url 'update_item' item.pk %}">
                <h4>Update Item</h4>
            </a>

            <a href="{% url 'delete_item' item.pk %}">
                <h4>Delete Item</h4>
            </a>
        </div>
    {% endfor %}

{% endblock %}