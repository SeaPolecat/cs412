<!-- 
blog/article.html 
display a single article on this web page
-->

{% extends 'blog/base.html' %}

{% block content %}

    <h1>{{article.title}}</h1>

    <!-- this displays the QuerySet of all articles. -->
    <!-- {{articles}} -->

    <main class="grid-container">
        <article>
            <!-- <img src="{{article.image_url}}" alt=""> -->

            {% if article.image_file %}
                <!-- using an image file instead of just a url -->
                <img src="{{article.image_file.url}}" alt="">
            {% else %}
                <h3>No image</h3>
            {% endif %}

            <div>
                <h2>{{article.title}}</h2>

                <h3>by {{article.author}} at {{article.published}}</h3>

                <p>
                    {{article.text}}
                </p>

                <h3>
                    <a href="{% url 'update_article' article.pk %}">Update Article</a>
                </h3>
            </div>
        </article>

        <div>
            <h2>Comments</h2>

            <h3>
                <a href="{% url 'create_comment' article.pk %}">Create a Comment</a>
            </h3>

            <!-- display the comments about this article -->

            {% for comment in article.get_all_comments %} <!-- calling a method in the Article model -->
                <div>
                    <strong>by {{comment.author}} at {{comment.published}}</strong>

                    <p>{{comment.text}}</p>

                    <!-- link to delete this comment -->
                    <a href="{% url 'delete_comment' comment.pk %}">Delete</a>
                </div>
            {% endfor %}
        </div>
    </main>

{% endblock %}